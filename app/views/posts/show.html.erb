<table>
  <tr><td><%= image_tag @post.image.url %></td></tr>
  <tr><td>Name</td><td><%= @post.name %></td></tr>
  <tr><td>Year</td><td><%= @post.year %></td></tr>
  <tr><td>Review</td><td><%= @post.review %></td></tr>
</tr>
</table>
<%= link_to "Edit", edit_post_path(@post) %>
<%= link_to 'Delete', post_path(@post), confirm: 'Are you sure?', method: :delete %>
<%= link_to like_post_path(@post), method: :put do %>
<button type="button" class="btn btn-info">
  <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
  <span class="badge"><%=@post.get_upvotes.size %></span>
</button>
<%= link_to "View Favourites", users_favourites_path %>
<% end %>
<h2>Comments</h2>
<% @post.comments.each do |comment| %>
    <b><%= comment.username %></b>
    <%= comment.name %>
    <% if current_user.email == comment.username || current_user.admin? %>
      <%= link_to 'Delete', [comment.post, comment],
      confirm: 'Are you sure?',
      method: :delete %>
    <% end %>
  <% comment.replies.each do |reply| %>
    <p style = "text-indent: 3em">
      <b><%= reply.author %> </b>
      <%= reply.content %>
        <% if current_user.email == reply.author || current_user.admin? %>
        <%= link_to 'Delete', reply_path(reply),
        confirm: 'Are you sure?',
        method: :delete %>
      <% end %>
    </p>
  <% end %>
  <%= form_for :reply, url: replies_path do |f| %>
    <%= f.hidden_field :comment_id, value: comment.id %>
    <%= f.text_field :content %>
  <%= f.submit "Reply" %>
  <% end %>
  <hr/>
<% end %>

<h3>Add a comment:</h3>
<%= form_for([@post, @post.comments.build]) do |f| %>
<%= f.label :comment %><br />
<%= f.text_area :name %>
<%= f.submit %>
<% end %>